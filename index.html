
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://SalvadorVelaSanz.github.io/">
      
      
      
        <link rel="next" href="Practica2/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>My site</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-21-instalacion-y-configuracion-de-servidor-web-nginx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="My site" class="md-header__button md-logo" aria-label="My site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Practica2.1
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="My site" class="md-nav__button md-logo" aria-label="My site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My site
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Practica2.1
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Practica2.1
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-servidor-web-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación servidor web Nginx
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-la-carpeta-del-sitio-web" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la carpeta del sitio web
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comprobaciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comprobacion-del-correcto-funcionamiento" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación del correcto funcionamiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobar-registros-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobar registros del servidor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurar-servidor-sftp-en-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Configurar servidor SFTP en Debian
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#para-configurar-https-en-tu-servidor-web-y-redirigir-automaticamente-todas-las-solicitudes-http-a-https" class="md-nav__link">
    <span class="md-ellipsis">
      Para configurar HTTPS en tu servidor web y redirigir automáticamente todas las solicitudes HTTP a HTTPS:
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.4
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.5
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="PracticaAmpliacion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PracticaAmpliacion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica4.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica5.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica6.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica6.2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="Practica13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica6.3
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-servidor-web-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación servidor web Nginx
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-la-carpeta-del-sitio-web" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la carpeta del sitio web
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comprobaciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comprobacion-del-correcto-funcionamiento" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación del correcto funcionamiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobar-registros-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobar registros del servidor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurar-servidor-sftp-en-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Configurar servidor SFTP en Debian
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#para-configurar-https-en-tu-servidor-web-y-redirigir-automaticamente-todas-las-solicitudes-http-a-https" class="md-nav__link">
    <span class="md-ellipsis">
      Para configurar HTTPS en tu servidor web y redirigir automáticamente todas las solicitudes HTTP a HTTPS:
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-21-instalacion-y-configuracion-de-servidor-web-nginx">Práctica 2.1 – Instalación y configuración de servidor web Nginx</h1>
<h2 id="instalacion-servidor-web-nginx">Instalación servidor web Nginx</h2>
<p>Para instalar el servidor Nginx en nuestra Debian, primero actualizamos los repositorios y después instalamos el paquete correspondiente:</p>
<p><img alt="Captura 1" src="images/Practica2.1/1.png" /></p>
<p>Comprobamos que Nginx se ha instalado y que está funcionando correctamente:</p>
<p><img alt="Captura 2" src="images/Practica2.1/2.png" /></p>
<h2 id="creacion-de-la-carpeta-del-sitio-web">Creación de la carpeta del sitio web</h2>
<p>Una vez hecho esto vamos a crear la carpeta de nuestro sitio web o dominio:</p>
<p><img alt="Captura 3" src="images/Practica2.1/3.png" /></p>
<p>Dentro de esa carpeta <code>html</code>, debéis clonar el siguiente repositorio:</p>
<p><a href="https://github.com/cloudacademy/static-website-example">https://github.com/cloudacademy/static-website-example</a></p>
<p><img alt="Captura 4" src="images/Practica2.1/4.png" /></p>
<p>Además, haremos que el propietario de esta carpeta y todo lo que haya dentro sea el usuario <code>www-data</code>, típicamente el usuario del servicio web.</p>
<p><img alt="Captura 5" src="images/Practica2.1/5.png" /></p>
<p>Y le daremos los permisos adecuados para que no nos dé un error de acceso no autorizado al entrar en el sitio web:</p>
<p><img alt="Captura 6" src="images/Practica2.1/6.png" /></p>
<p>Para comprobar que el servidor está funcionando y sirviendo páginas correctamente, podéis acceder desde vuestro cliente a:</p>
<p><code>http://IP-maq-virtual</code></p>
<p><img alt="Captura 7" src="images/Practica2.1/7.png" /></p>
<p>En Nginx hay dos rutas importantes. La primera de ellas es <code>sites-available</code>, que contiene los archivos de configuración de los hosts virtuales o bloques disponibles en el servidor. Es decir, cada uno de los sitios webs que alberga el servidor. La otra es <code>sites-enabled</code>, que contiene los archivos de configuración de los sitios habilitados, es decir, los que funcionan en ese momento.</p>
<p>Dentro de <code>sites-available</code> hay un archivo de configuración por defecto (<code>default</code>), que es la página que se muestra si accedemos al servidor sin indicar ningún sitio web o cuando el sitio web no es encontrado en el servidor (debido a una mala configuración, por ejemplo). Esta es la página que nos ha aparecido en el apartado anterior.</p>
<p>Para que Nginx presente el contenido de nuestra web, es necesario crear un bloque de servidor con las directivas correctas. En vez de modificar el archivo de configuración predeterminado directamente, crearemos uno nuevo en <code>/etc/nginx/sites-available/nombre_web</code>:</p>
<p><img alt="Captura 8" src="images/Practica2.1/8.png" /></p>
<p>Y el contenido de este nuevo archivo es:</p>
<p><img alt="Captura 9" src="images/Practica2.1/9.png" /></p>
<p>Aquí la directiva <code>root</code> debe ir seguida de la ruta absoluta donde se encuentre el archivo <code>index.html</code> de nuestra página web, que se encuentra entre todos los que habéis descomprimido.</p>
<p>Y crearemos un archivo simbólico entre este archivo y el de sitios que están habilitados, para que se dé de alta automáticamente.</p>
<p><img alt="Captura 10" src="images/Practica2.1/10.png" />
Y reiniciamos el servidor para aplicar la configuración:</p>
<p><img alt="Captura 11" src="images/Practica2.1/11.png" /></p>
<h2 id="comprobaciones">Comprobaciones</h2>
<h3 id="comprobacion-del-correcto-funcionamiento">Comprobación del correcto funcionamiento</h3>
<p>Como aún no poseemos un servidor DNS que traduzca los nombres a IPs, debemos hacerlo de forma manual. Vamos a editar el archivo <code>/etc/hosts</code> de nuestra máquina anfitriona para que asocie la IP de la máquina virtual a nuestro <code>server_name</code>.</p>
<p>Este archivo, en Linux, está en: <code>/etc/hosts</code></p>
<p>Y en Windows: <code>C:\Windows\System32\drivers\etc\hosts</code></p>
<p>En mi caso usare windows</p>
<p><img alt="Captura 12" src="images/Practica2.1/12.png" /></p>
<p>Y deberemos añadirle la línea:</p>
<p><code>192.168.X.X nombre_web</code></p>
<p><img alt="Captura 13" src="images/Practica2.1/13.png" /></p>
<p>Donde debéis sustituir la IP por la que tenga vuestra máquina virtual.</p>
<h3 id="comprobar-registros-del-servidor">Comprobar registros del servidor</h3>
<p>Comprobad que las peticiones se están registrando correctamente en los archivos de logs, tanto las correctas como las erróneas:</p>
<ul>
<li><code>/var/log/nginx/access.log</code>: cada solicitud a su servidor web se registra en este archivo de registro, a menos que Nginx esté configurado para hacer algo diferente.</li>
<li><code>/var/log/nginx/error.log</code>: cualquier error de Nginx se asentará en este registro.</li>
</ul>
<p>Aqui se muestra el contenido que contine mi <code>/var/log/nginx/access.log</code></p>
<p><img alt="Captura 14" src="images/Practica2.1/14.png" /></p>
<p>Si queremos tener varios dominios o sitios web en el mismo servidor Nginx (es decir, que tendrán la misma IP), debemos repetir todo el proceso anterior con el nuevo nombre de dominio que queramos configurar.</p>
<h3 id="configurar-servidor-sftp-en-debian">Configurar servidor SFTP en Debian</h3>
<p>En primer lugar, lo instalaremos desde los repositorios:</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install vsftpd

</code></pre>
<p><img alt="Captura 15" src="images/Practica2.1/15.png" /></p>
<p>Ahora vamos a crear una carpeta en nuestro home en Debian:</p>
<pre><code class="language-bash">mkdir /home/nombre_usuario/ftp
</code></pre>
<p><img alt="Captura 16" src="images/Practica2.1/16.png" /></p>
<p>En la configuración de vsftpd indicaremos que este será el directorio al cual vsftpd se cambia después de conectarse el usuario.</p>
<p>Ahora vamos a crear los certificados de seguridad necesarios para aportar la capa de cifrado a nuestra conexión (algo parecido a HTTPS):</p>
<pre><code class="language-bash">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/vsftpd.pem -out /etc/ssl/private/vsftpd.pem
</code></pre>
<p><img alt="Captura 17" src="images/Practica2.1/17.png" /></p>
<p>Y una vez realizados estos pasos, procedemos a realizar la configuración de vsftpd propiamente dicha. Se trata, con el editor de texto que más os guste, de editar el archivo de configuración de este servicio, por ejemplo con nano:</p>
<pre><code class="language-bash">sudo nano /etc/vsftpd.conf
</code></pre>
<p><img alt="Captura 18" src="images/Practica2.1/18.png" /></p>
<p>En primer lugar, buscaremos las siguientes líneas del archivo y las eliminaremos por completo:</p>
<pre><code>rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
ssl_enable=NO
</code></pre>
<p><img alt="Captura 19" src="images/Practica2.1/19.png" /></p>
<p>Tras ello, añadiremos estas líneas en su lugar:</p>
<pre><code>rsa_cert_file=/etc/ssl/private/vsftpd.pem
rsa_private_key_file=/etc/ssl/private/vsftpd.pem
ssl_enable=YES
allow_anon_ssl=NO
force_local_data_ssl=YES
force_local_logins_ssl=YES
ssl_tlsv1=YES
ssl_sslv2=NO
ssl_sslv3=NO
require_ssl_reuse=NO
ssl_ciphers=HIGH

local_root=/home/nombre_usuario/ftp
</code></pre>
<p><img alt="Captura 20" src="images/Practica2.1/20.png" /></p>
<p>Y, tras guardar los cambios, reiniciamos el servicio para que coja la nueva configuración:</p>
<pre><code class="language-bash">sudo systemctl restart --now vsftpd
</code></pre>
<p><img alt="Captura 21" src="images/Practica2.1/21.png" /></p>
<p>Tras acabar esta configuración, ya podremos acceder a nuestro servidor mediante un cliente FTP adecuado, como por ejemplo Filezilla de dos formas, a saber:</p>
<ol>
<li>Mediante el puerto por defecto del protocolo inseguro FTP, el 21, pero utilizando certificados que cifran el intercambio de datos convirtiéndolo así en seguro.</li>
<li>Haciendo uso del protocolo SFTP, dedicado al intercambio de datos mediante una conexión similar a SSH, utilizando de hecho el puerto 22.</li>
</ol>
<p><img alt="Captura 22" src="images/Practica2.1/22.png" /></p>
<p><img alt="Captura 1" src="images/Practica2.1/23.png" /></p>
<p><img alt="Captura 1" src="images/Practica2.1/24.png" /></p>
<p>Recordemos que debemos tener nuestro sitio web en la carpeta <code>/var/www</code> y darle los permisos adecuados, de forma similar a cómo hemos hecho con el otro sitio web.</p>
<p>El comando que nos permite descomprimir un .zip en un directorio concreto es:</p>
<pre><code class="language-bash">unzip archivo.zip -d /nombre/directorio
</code></pre>
<p>Si no tuvierais <code>unzip</code> instalado, lo instaláis:</p>
<pre><code class="language-bash">sudo apt-get update &amp;&amp; sudo apt-get install unzip
</code></pre>
<h2 id="para-configurar-https-en-tu-servidor-web-y-redirigir-automaticamente-todas-las-solicitudes-http-a-https">Para configurar HTTPS en tu servidor web y redirigir automáticamente todas las solicitudes HTTP a HTTPS:</h2>
<ul>
<li><strong>Generar Certificados SSL Autofirmados</strong><br />
  Para generar certificados SSL autofirmados, usa el siguiente comando:</li>
</ul>
<p><code>bash
  sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt</code></p>
<p><img alt="Captura 25" src="images/Practica2.1/25.png" /></p>
<ul>
<li><strong>Configurar Nginx para Usar el Certificado SSL</strong><br />
  Edita el archivo de configuración del sitio web en Nginx. Esto podría estar en <code>/etc/nginx/sites-available/nombre_web</code> o <code>/etc/nginx/conf.d/nombre_web.conf</code> dependiendo de tu configuración.</li>
</ul>
<p><code>bash
  sudo nano /etc/nginx/sites-available/nombre_web</code></p>
<p>Agrega o modifica las secciones de configuración como sigue:</p>
<p><img alt="Captura 26" src="images/Practica2.1/26.png" /></p>
<p><img alt="Captura 27" src="images/Practica2.1/27.png" /></p>
<ul>
<li><strong>Revisar la Configuración de Nginx</strong><br />
  Después de hacer los cambios, revisa la configuración de Nginx para asegurarte de que no haya errores:</li>
</ul>
<p><code>bash
  sudo nginx -t</code></p>
<p>Si la configuración es correcta, verás un mensaje de éxito.</p>
<ul>
<li><strong>Reiniciar Nginx</strong><br />
  Reinicia el servidor Nginx para aplicar los cambios:</li>
</ul>
<p><code>bash
  sudo systemctl restart nginx</code></p>
<p><img alt="Captura 28" src="images/Practica2.1/28.png" /></p>
<ul>
<li><strong>Comprobar la Redirección y HTTPS</strong><br />
  Abre tu navegador y visita <code>http://servidor1</code> (o la dirección IP o dominio que estés utilizando). Deberías ser redirigido automáticamente a <code>https://servidor1</code>.<br />
  Comprueba que el certificado se carga correctamente y que el sitio está utilizando HTTPS.</li>
</ul>
<p><img alt="Captura 29" src="images/Practica2.1/29.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>