
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://SalvadorVelaSanz.github.io/Practica7/">
      
      
        <link rel="prev" href="../Practica6/">
      
      
        <link rel="next" href="../Practica8/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Practica3.2 - My site</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-32-despliegue-de-aplicaciones-con-node-express" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="My site" class="md-header__button md-logo" aria-label="My site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Practica3.2
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="My site" class="md-nav__button md-logo" aria-label="My site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My site
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.4
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica2.5
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Practica3.2
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Practica3.2
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-nodejs-express-y-test-de-la-primera-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de Node.js, Express y test de la primera aplicación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    <span class="md-ellipsis">
      Task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-nodejs-y-express-en-debian-11" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de Node.js y Express en Debian 11
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación de Node.js y Express en Debian 11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalando-expressjs-en-debian-11" class="md-nav__link">
    <span class="md-ellipsis">
      Instalando ExpressJS en Debian 11
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando ExpressJS en Debian 11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-instalando-expressjs-en-debian-11" class="md-nav__link">
    <span class="md-ellipsis">
      1. Instalando ExpressJS en Debian 11
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-creando-una-nueva-aplicacion-con-expressjs" class="md-nav__link">
    <span class="md-ellipsis">
      2. Creando una nueva aplicación con Express.js
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#despliegue-de-una-nueva-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Despliegue de una nueva aplicación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-34" class="md-nav__link">
    <span class="md-ellipsis">
      PRACTICA 3.4
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aplicacion-para-netlify" class="md-nav__link">
    <span class="md-ellipsis">
      Aplicación para Netlify
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aplicación para Netlify">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proceso-de-despliegue-en-netlify" class="md-nav__link">
    <span class="md-ellipsis">
      Proceso de despliegue en Netlify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task_1" class="md-nav__link">
    <span class="md-ellipsis">
      Task
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#despliegue-mediante-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Despliegue mediante CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#despliegue-mediante-conexion-con-github" class="md-nav__link">
    <span class="md-ellipsis">
      Despliegue mediante conexión con Github
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica3.3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PracticaAmpliacion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PracticaAmpliacion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica4.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica5.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica6.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica6.2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica6.3
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-nodejs-express-y-test-de-la-primera-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de Node.js, Express y test de la primera aplicación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    <span class="md-ellipsis">
      Task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-nodejs-y-express-en-debian-11" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de Node.js y Express en Debian 11
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación de Node.js y Express en Debian 11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalando-expressjs-en-debian-11" class="md-nav__link">
    <span class="md-ellipsis">
      Instalando ExpressJS en Debian 11
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando ExpressJS en Debian 11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-instalando-expressjs-en-debian-11" class="md-nav__link">
    <span class="md-ellipsis">
      1. Instalando ExpressJS en Debian 11
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-creando-una-nueva-aplicacion-con-expressjs" class="md-nav__link">
    <span class="md-ellipsis">
      2. Creando una nueva aplicación con Express.js
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#despliegue-de-una-nueva-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Despliegue de una nueva aplicación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-34" class="md-nav__link">
    <span class="md-ellipsis">
      PRACTICA 3.4
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aplicacion-para-netlify" class="md-nav__link">
    <span class="md-ellipsis">
      Aplicación para Netlify
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aplicación para Netlify">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proceso-de-despliegue-en-netlify" class="md-nav__link">
    <span class="md-ellipsis">
      Proceso de despliegue en Netlify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task_1" class="md-nav__link">
    <span class="md-ellipsis">
      Task
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#despliegue-mediante-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Despliegue mediante CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#despliegue-mediante-conexion-con-github" class="md-nav__link">
    <span class="md-ellipsis">
      Despliegue mediante conexión con Github
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-32-despliegue-de-aplicaciones-con-node-express">Práctica 3.2: Despliegue de aplicaciones con Node Express</h1>
<h2 id="introduccion">Introducción</h2>
<p>En esta práctica vamos a realizar el despliegue de aplicaciones Node.js sobre un servidor Node Express. Lo curioso de este caso es que el despliegue aquí cambia un poco puesto que no se hace sobre el servidor, sino que la aplicación es el servidor.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Comprueba que el servidor Tomcat de prácticas anteriores no está corriendo o nos dará problemas:</p>
<p><code>bash
sudo systemctl status tomcat9</code></p>
<p>Y en caso de salir activo, pararlo:</p>
<p><code>bash
sudo systemctl stop tomcat9</code></p>
</blockquote>
<p>Si no lo has instalado mediante APT, deberás ir al directorio donde lo tengas. En mi caso es <code>/opt/tomcat</code> y hacer:</p>
<pre><code class="language-bash">cd /opt/tomcat/bin
./shutdown.sh
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/1/1.png" /></p>
<h2 id="instalacion-de-nodejs-express-y-test-de-la-primera-aplicacion">Instalación de Node.js, Express y test de la primera aplicación</h2>
<p>La primera parte de la práctica es muy sencilla. Consistirá en instalar sobre nuestra Debian 11 tanto Node.js como Express y tras ello crear un archivo <code>.js</code> de prueba para comprobar que nuestro primer despliegue funciona correctamente.</p>
<p>Para ello, os podéis apoyar en este sencillo tutorial o este otro, Y para Express:</p>
<p>En lugar de acceder a <code>http://localhost:3000</code>, debéis acceder desde vuestra máquina local a <code>http://IP-maq-virtual:3000</code>, utilizando la IP concreta de vuestra máquina virtual.</p>
<blockquote>
<p><strong>Recordatorio</strong></p>
<p>Debéis añadir a vuestro grupo de seguridad el puerto que estéis utilizando para acceder a la aplicación (3000 u otro), permitiendo el tráfico de entrada hacia ese puerto TCP.</p>
<p>Recordad parar el servidor (<code>CTRL+C</code>) al acabar la práctica.</p>
</blockquote>
<h2 id="task">Task</h2>
<p>Documenta, incluyendo capturas de pantallas, el proceso que has seguido para realizar el despliegue de esta nueva aplicación, así como el resultado final.</p>
<h2 id="instalacion-de-nodejs-y-express-en-debian-11">Instalación de Node.js y Express en Debian 11</h2>
<p>Para comenzar, abre una terminal y actualiza el sistema operativo:</p>
<pre><code class="language-bash">sudo apt update
sudo apt upgrade
</code></pre>
<p><img alt="Captura 2" src="../images/Practica3.2/1/2.png" /></p>
<p>Luego, añade el repositorio de la rama 16.x de NodeJS:</p>
<pre><code class="language-bash">curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash -
</code></pre>
<p><img alt="Captura 3" src="../images/Practica3.2/1/3.png" /></p>
<p>Después, ejecuta el siguiente comando:</p>
<pre><code class="language-bash">sudo apt install nodejs
</code></pre>
<p><img alt="Captura 4" src="../images/Practica3.2/1/4.png" /></p>
<p>Finalmente, verifica las versiones instaladas de NodeJS y NPM para asegurarte de que la instalación fue exitosa:</p>
<pre><code class="language-bash">node --version
v16.13.2
npm --version
8.1.2
</code></pre>
<p><img alt="Captura 5" src="../images/Practica3.2/1/5.png" /></p>
<h3 id="instalando-expressjs-en-debian-11">Instalando ExpressJS en Debian 11</h3>
<p>Ahora es momento de instalar Express.js. Para hacerlo de manera global, ejecuta:</p>
<pre><code class="language-bash">sudo npm install -g express
</code></pre>
<p><img alt="Captura 6" src="../images/Practica3.2/1/6.png" /></p>
<h4 id="1-instalando-expressjs-en-debian-11">1. Instalando ExpressJS en Debian 11</h4>
<p>Primero, crea una carpeta para el proyecto:</p>
<pre><code class="language-bash">mkdir project
</code></pre>
<p>Accede a la carpeta:</p>
<pre><code class="language-bash">cd project
</code></pre>
<p>Inicializa el proyecto:</p>
<pre><code class="language-bash">npm init -y
</code></pre>
<p><img alt="Captura 7" src="../images/Practica3.2/1/7.png" /></p>
<p>Instala Express.js localmente para este proyecto:</p>
<pre><code class="language-bash">npm install express
</code></pre>
<p>Crea un archivo de ejemplo:</p>
<pre><code class="language-bash">sudo nano app.js
</code></pre>
<p><img alt="Captura 8" src="../images/Practica3.2/1/8.png" /></p>
<p>Agrega el siguiente contenido:</p>
<pre><code class="language-javascript">const express = require('express')
const app = express()
const port = 3000

app.get('/', (req, res) =&gt; {
    res.send('Hola. Bienvenido a este blog')
})

app.listen(port, () =&gt; {
    console.log(`Aplicación de ejemplo escuchando en http://localhost:${port}`)
})
</code></pre>
<p><img alt="Captura 9" src="../images/Practica3.2/1/9.png" /></p>
<h4 id="2-creando-una-nueva-aplicacion-con-expressjs">2. Creando una nueva aplicación con Express.js</h4>
<p>Guarda los cambios y cierra el editor.</p>
<p>Ejecuta el proyecto con este comando:</p>
<pre><code class="language-bash">node app.js
</code></pre>
<p>Salida de ejemplo:</p>
<pre><code class="language-bash">Aplicación de ejemplo escuchando en http://localhost:3000
</code></pre>
<p><img alt="Captura 10" src="../images/Practica3.2/1/10.png" />
<img alt="Captura 11" src="../images/Practica3.2/1/11.png" /></p>
<h2 id="despliegue-de-una-nueva-aplicacion">Despliegue de una nueva aplicación</h2>
<p>Vamos ahora a realizar el despliegue de una aplicación de terceros para ver cómo es el proceso.</p>
<p>Se trata de un "prototipo" de una aplicación de predicción meteorológica que podéis encontrar en este repositorio de Github.</p>
<p>Tal y como indican las instrucciones del propio repositorio, los pasos a seguir son, en primer lugar, clonar el repositorio a nuestra máquina:</p>
<pre><code class="language-bash">git clone https://github.com/MehedilslamRipon/Shopping-Cart-Application
</code></pre>
<p>Movernos al nuevo directorio:</p>
<pre><code class="language-bash">cd Shopping-Cart-Application/
</code></pre>
<p>Instalar las librerías necesarias (paciencia, este proceso puede tardar un buen rato):</p>
<pre><code class="language-bash">npm install
</code></pre>
<p><img alt="Captura 12" src="../images/Practica3.2/1/12.png" /></p>
<p>Y, por último, iniciar la aplicación:</p>
<pre><code class="language-bash">npm run start
</code></pre>
<p>Cuando sigáis el proceso necesario e intentéis iniciar la aplicación con Express, os dará un error del tipo:</p>
<pre><code class="language-bash">sh: 1: nodemon: not found
</code></pre>
<p><img alt="Captura 13" src="../images/Practica3.2/1/13.png" /></p>
<p>Este error ocurre porque no tenemos instalado el nodemon. para arreglarlo podemos instalarlo globalmente o solo en el proyecto. en mi caso lo hare en el proyecto</p>
<p>para eso tenemos que usar el siguiente comando dentro del proyecto:</p>
<pre><code class="language-bash">npm install nodemon --save-dev
</code></pre>
<p><img alt="Captura 14" src="../images/Practica3.2/1/14.png" />
<img alt="Captura 15" src="../images/Practica3.2/1/15.png" /></p>
<h2 id="practica-34">PRACTICA 3.4</h2>
<p>Tras loguearnos por SSH en nuestro Debian, nos crearemos un directorio para albergar la aplicación con el nombre que queramos. En ese directorio, crearemos los 3 archivos (dos .html y un .js) que conformarán nuestra sencilla aplicación de ejemplo:</p>
<ul>
<li>head.html</li>
<li>tail.html</li>
<li>aplicacion.js</li>
</ul>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Hola Mundo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Esta es la pagina principal&lt;/h1&gt;
    &lt;p&gt;&lt;a href=&quot;/tailPage&quot;&gt;Ir a la siguiente pagina&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Hola Mundo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Esta es la pagina principal&lt;/h1&gt;
    &lt;p&gt;&lt;a href=&quot;/tailPage&quot;&gt;Ir a la siguiente pagina&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="language-javascript">var http = require('http');
var fs = require('fs'); // para obtener los datos del archivo html
var port = process.env.PORT || 8080; 

http.createServer(function (req, res) {
    res.writeHead(200, { 'Content-Type': 'text/html' });

    // req.url almacena el path o ruta de la URL
    var url = req.url;
    if (url === &quot;/&quot;) {
// fs.readFile busca el archivo HTML
// el primer parámetro es el path al archivo HTML
// y el segundo es el callback de la función
// si el archivo no se encuentra, la función devuelve un error
// si el archivo se encuentra, el contenido del mismo se encuentra en pgres    
        fs.readFile(&quot;head.html&quot;, function (err, pgres) {
            if (err)
                res.write(&quot;HEAD.HTML NOT FOUND&quot;);
            else {
                // Las siguientes 3 lineas
                // tienen la función de enviar el archivo html
                // y finalizar el proceso de respuesta
                res.writeHead(200, { 'Content-Type': 'text/html' });
                res.write(pgres);
                res.end();
            }
        });
    }
    else if (url === &quot;/tailPage&quot;) {
        fs.readFile(&quot;tail.html&quot;, function (err, pgres) {
            if (err)
                res.write(&quot;TAIL.HTML NOT FOUND&quot;);
            else {
                res.writeHead(200, { 'Content-Type': 'text/html' });
                res.write(pgres);
                res.end();
            }
        });
    }

}).listen(port, function () {
    console.log(&quot;SERVER STARTED PORT: 8080&quot;);
});
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/1.png" />
Ahora, tal y como hacemos siempre a la hora de crear nuestra aplicación Node.js, con el fin de crear el archivo package.json, utilizaremos en el terminal el comando:</p>
<pre><code class="language-bash">npm init
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/2.png" />
Podemos probar que nuestra aplicación funciona perfectamente en local:</p>
<pre><code class="language-bash">node aplicacion.js
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/3.png" />
Y tras ello, debemos poder acceder, desde nuestra máquina anfitriona a <code>http://IP-maq-virtual:8080</code></p>
<p>Ya con la aplicación creada y comprobada, podremos desplegarla en múltiples plataformas en la nube, como AWS, GCP, Azure, Digital Ocean, Heroku...</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>Para que nos funcione en la plataforma PaaS, en el archivo package.json que se nos ha creado al hacer el npm init debemos hacerle una modificación.</p>
<p>En el bloque scripts, debemos borrar lo que haya dentro y dejar únicamente dentro de él:</p>
<p><code>json
"start": "node aplicacion.js"</code></p>
</blockquote>
<p>De forma que el sitio donde la despleguemos sepa que comando utilizar para iniciar la aplicación tras desplegarla.</p>
<h2 id="aplicacion-para-netlify">Aplicación para Netlify</h2>
<p>Puesto que el interés en este módulo radica en el proceso de despliegue, suponiendo que la parte de desarrollo ya es abordada en otros módulos, vamos a utilizar una aplicación de ejemplo que nos ahorre tiempo para centrarnos en el despliegue.</p>
<p>Nos clonaremos este repositorio:</p>
<pre><code class="language-bash">git clone https://github.com/StackAbuse/color-shades-generator
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/4.png" /></p>
<h3 id="proceso-de-despliegue-en-netlify">Proceso de despliegue en Netlify</h3>
<p>Por mera curiosidad y ambición de aprendizaje, vamos a ver dos métodos de despliegue en Netlify:</p>
<ol>
<li>Despliegue manual desde el CLI de Netlify, es decir, desde el terminal, a partir de un directorio local de nuestra máquina.</li>
<li>Despliegue desde un código publicado en uno de nuestros repositorios de Github</li>
</ol>
<p>El primero nos permitirá conocer el CLI de Netlify y el segundo nos acercara más a una experiencia real de despliegue.</p>
<h3 id="task_1">Task</h3>
<p>Vuestra primera tarea será registraros en Netlify con vuestro email (no con vuestra cuenta de Github) y decirle que no cuando os pida enlazar con vuestra cuenta de Github (lo haremos más adelante).</p>
<h4 id="despliegue-mediante-cli">Despliegue mediante CLI</h4>
<p>Una vez registrados, debemos instalar el CLI de Netlify para ejecutar sus comandos desde el terminal:</p>
<pre><code class="language-bash">sudo npm install netlify-cli -g
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/5.png" /></p>
<p>Está claro que para realizar acciones de deploy, Netlify nos solicitará una autenticación, esto se hace mediante el comando:</p>
<pre><code class="language-bash">netlify login
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/6.png" />
El cual nos muestra una pantalla del navegador para que concedamos la autorización pertinente. Sin embargo, recordemos el problema de que estamos conectados por SSH a nuestro servidor y no tenemos la posibilidad del uso de un entorno gráfico.</p>
<p>En este caso, siguiendo las instrucciones de la documentación:</p>
<p>Generamos el token de acceso
<img alt="Captura 1" src="../images/Practica3.2/2/7.png" />
<img alt="Captura 1" src="../images/Practica3.2/2/8.png" />
Lo establecemos como variable de ambiente:</p>
<p>Y nos logueamos</p>
<pre><code class="language-bash">netlify login
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/9.png" /></p>
<p>Bueno, tenemos el código de nuestra aplicación, tenemos nuestra cuenta en Netlify y tenemos el CLI necesario para ejecutar comandos desde el terminal en esa cuenta... ¿Podemos proceder al despliegue sin mayores complicaciones?</p>
<p>La respuesta es NO, como buenos desarrolladores y en base a experiencias anteriores, ya sabéis que hay que hacer un build de la aplicación para, posteriormente, desplegarla. Vamos a ello.</p>
<p>En primer lugar, como sabemos, debemos instalar todas las dependencias que vienen indicadas en el archivo package.json:</p>
<pre><code class="language-bash">npm install
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/10.png" />
Y cuando ya las tengamos instaladas podemos proceder a realizar el build:</p>
<pre><code class="language-bash">npm run build
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/11.png" />
Esto nos creará una nueva carpeta llamada build que contendrá la aplicación que debemos desplegar. Y ya podemos hacer un pre-deploy de la aplicación de la que hemos hecho build antes:</p>
<pre><code class="language-bash">netlify deploy
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/12.png" />
Nos hará algunas preguntas para el despliegue:
- Indicamos que queremos crear y configurar un nuevo site
- El Team lo dejamos por defecto
- Le indicamos el nombre que queremos emplear para la web (nombre-practica3-4) y el directorio a utilizar para el deploy (directorio ./build).</p>
<p>Y si nos indica que todo ha ido bien e incluso podemos ver el "borrador" (Website Draft URL) de la web que nos aporta, podemos pasarla a producción finalmente tal y como nos indica la misma salida del comando:</p>
<pre><code class="language-bash">If everything looks good on your draft URL, deploy it to your main site URL with the --prod flag.
netlify deploy --prod
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/13.png" /></p>
<blockquote>
<p><strong>Warning</strong></p>
<p>No olvides desplegar finalmente en producción y comprobar que puedes acceder a la URL.</p>
</blockquote>
<h4 id="despliegue-mediante-conexion-con-github">Despliegue mediante conexión con Github</h4>
<p>En primer lugar, vamos a eliminar el site que hemos desplegado antes en Netlify para evitarnos cualquier problema y/o conflicto:</p>
<p>En segundo lugar, vamos a borrar el directorio donde se halla el repositorio clonado en el paso anterior para así poder empezar de 0:</p>
<pre><code class="language-bash">rm -rf directorio_repositorio
</code></pre>
<p>Como queremos simular que hemos picado el código a mano en local y lo vamos a subir a Github por primera vez, nos descargaremos los fuentes en formato .zip sin que tenga ninguna referencia a Github:</p>
<pre><code class="language-bash">wget https://github.com/StackAbuse/color-shades-generator/archive/refs/heads/main.zip
</code></pre>
<p>Creamos una carpeta nueva y descomprimimos dentro el zip:</p>
<pre><code class="language-bash">mkdir practica3.4
unzip main.zip -d practica3.4/
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/14.png" /></p>
<p>Entramos en la carpeta donde está el código:</p>
<pre><code class="language-bash">cd practica3.4/color-shades-generator-main/
</code></pre>
<p>Ahora debemos crear un repositorio completamente vacío en Github que se llame practicaTresCuatro:</p>
<p><img alt="Captura 1" src="../images/Practica3.2/2/15.png" />
Y tras ello, volviendo al terminal a la carpeta donde estábamos, la iniciamos como repositorio, añadimos todo el contenido de la misma para el commit, hacemos el commit con el mensaje correspondiente y creamos la rama main:</p>
<pre><code class="language-bash">$ git init
$ git add .
$ git commit -m &quot;Subiendo el código...&quot;
$ git branch -M main
</code></pre>
<p>Y ahora sólo queda referenciar nuestra carpeta al repositorio recién creado en Github y hacer un push para subir todo el contenido del commit a él:</p>
<pre><code class="language-bash">$ git remote add origin https://github.com/username/practicaTresCuatro.git
$ git push -u origin main
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/16.png" />
Ahora que ya tenemos subido el código a GitHub, de alguna manera debemos enganchar o enlazar nuestra cuenta de Github con la de Netlify para que éste último pueda traerse el código de allí, hacer el build y desplegarlo. Así pues, entramos en nuestro dashboard de Netlify y le damos a importar proyecto existente de git:</p>
<p>Le indicamos que concretamente de Github:</p>
<p>Y nos saltará una ventana pidiendo que autoricemos a Netlify a acceder a nuestros repositorios de Github:</p>
<p><img alt="Captura 1" src="../images/Practica3.2/2/17.png" /></p>
<p>Y luego le indicaremos que no acceda a todos nuestros repositorios sino sólo al repositorio que necesitamos, que es donde tenemos el código de nuestra aplicación:
<img alt="Captura 1" src="../images/Practica3.2/2/18.png" />
Y ya quedará todo listo:
<img alt="Captura 1" src="../images/Practica3.2/2/19.png" />
Y desplegamos la aplicación:</p>
<p>Netlify se encargará de hacer el build de forma automática tal y como hemos visto en la imagen de arriba, con el comando npm run build, publicando el contenido del directorio build.</p>
<blockquote>
<p><strong>Atención</strong></p>
<p>Tras el deploy, en "Site settings" podéis y debéis cambiar el nombre de la aplicación por nombre-practica3-4, donde nombre es vuestro nombre.</p>
</blockquote>
<p><img alt="Captura 1" src="../images/Practica3.2/2/20.png" /></p>
<p>Lo que hemos conseguido de esta forma es que, cualquier cambio que hagamos en el proyecto y del que hagamos commit y push en Github, automáticamente genere un nuevo despliegue en Netlify. Es el principio de lo que más adelante veremos como despliegue continuo.</p>
<p>Comprobemos que realmente es así:</p>
<p>Dentro de la carpeta public encontramos el archivo robots.txt, cuyo cometido es indicar a los rastreadores de los buscadores a qué URLs del sitio pueden acceder. A este archivo se puede acceder a través de la URL del site:</p>
<p>Dentro de la carpeta public, utilizando el editor de texto que prefiráis en vuestro terminal, modificad el archivo robots.txt para que excluya un directorio que se llame nombre_apellido, utilizando obviamente vuestro nombre y apellido.</p>
<p><img alt="Captura 1" src="../images/Practica3.2/2/21.png" /></p>
<pre><code class="language-txt">User-agent: *
Disallow: /nombre_y_apellido/
</code></pre>
<p><img alt="Captura 1" src="../images/Practica3.2/2/22.png" />
Haz un nuevo commit y push (del caso anterior, recuerda el comando git previo para añadir los archivos a hacer commit)</p>
<p><img alt="Captura 1" src="../images/Practica3.2/2/23.png" /></p>
<p>Comprueba en el dashboard de Netlify que se ha producido un nuevo deploy de la aplicación hace escasos segundos
<img alt="Captura 1" src="../images/Practica3.2/2/24.png" />
Accede a <code>https://url_de_la_aplicacion/robots.txt</code> y comprueba que, efectivamente, se ve reflejado el cambio
<img alt="Captura 1" src="../images/Practica3.2/2/25.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>